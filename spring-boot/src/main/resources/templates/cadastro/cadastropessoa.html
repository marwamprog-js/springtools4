<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<title>Pessoas</title>

<!--Import Google Icon Font-->
<link href="https://fonts.googleapis.com/icon?family=Material+Icons"
	rel="stylesheet">

<!--Import materialize.css-->
<link type="text/css" rel="stylesheet"
	href="/materialize/css/materialize.min.css" media="screen,projection" />

<style type="text/css">
#btnSalvar, #btnPesquisar {
	color: white !important;
}

.pesquisa {
	width: 50%;
    margin: 20px auto;
    background: #f0f9f3;
    padding: 20px;
    border: 1px solid #ccc;
}

.container-cadastro {
	background: #f6fff6;
    padding: 20px;
    border: 1px solid #ccc;
}

.msg-erro {	
    background: #f76464;
    color: #fff;
}

.msg-erro > div {	
    padding: 5px;
    margin-left: 10px;
}

table.striped>tbody>tr:nth-child(odd){
	background-color: rgb(222 239 230 / 50%);
}

</style>

</head>
<body>

	<h3 style="text-align: center;">Spring Boot + thymeleaf + Material Design Lite</h3>
	<h5 style="text-align: center;">Cadastro Pessoa</h5>

	<div class="container">
		<div class="row container-cadastro">
			<form action="salvarpessoa" id="formPessoa" class="col-12" method="POST" th:object="${pessoaobj}" style="margin-bottom: 30px;">
				
				<div class="row">
					<div class="input-fiel col s2">
						<label for="id" class="active">Id</label>
						<input type="text" name="id" id="id" th:field="*{id}" readonly="readonly">
					</div>
				</div>
				
				<div class="row">
					<div class="input-fiel col s6">
						<label for="nome" class="active">Nome</label>
						<input name="nome" class="validate" id="nome" placeholder="Informe o Nome" th:field="*{nome}" /><br />
					</div>
					
					<div class="input-fiel col s6">
						<label>Sobrenome</label> 
						<input name="sobrenome" class="validate" placeholder="Informe o Sobrenome" th:field="*{sobrenome}"/><br />	
					</div>
				</div>
				 
				<div class="row" sec:authorize="hasRole('ROLE_TECNICO')">
					<div class="input-fiel col s2">
						<label for="idade" class="active">Idade</label> 
						<input type="number" name="idade" id="idade" th:field="*{idade}" /><br />	
					</div>
				</div>
				 
				 
				<div class="row">
					<div class="input-fiel col s6">
						<button class="waves-effect waves-light btn gray" onclick="document.getElementById('formPessoa').reset();">Novo</button>
						<input type="submit" id="btnSalvar" class="waves-effect waves-light btn blue" value="Salvar" />						
					</div>
				</div>			
	
			</form>
			
			<div class="col-12 msg-erro">
				<div th:each="m : ${msg}">
					<span th:text="${m}"></span>
				</div>
			</div>
			
			
		</div>
	

		<div class="pesquisa">
			<form action="pesquisarpessoa" method="POST" style="margin-top: 30px;">
			
				<label>Pesquisa por nome: </label>
				<input name="nomepesquisa" placeholder="Digite o nome da pessoa" />
				<input type="submit" id="btnPesquisar" class="waves-effect waves-light btn blue" value="Buscar">
				
			</form>
		</div>
		
		<a href="/listarpessoas" >Listar Pessoas</a>
		
		<table class="striped" style="margin-top: 30px;">
			<thead>
				<tr>
					<th>#</th>
					<th>Nome</th>
					<th>Sobrenome</th>
					<th>Idade</th>
					<th>Opções</th>
				</tr>
			</thead>
			<tr th:each="pessoa : ${pessoas}">
				<td th:text="${pessoa.id}"></td>
				<td><a th:href="@{/telefones/{idpessoa}(idpessoa=${pessoa.id})}" ><span th:text="${pessoa.nome}"></span></a></td>
				<td th:text="${pessoa.sobrenome}"></td>
				<td th:text="${pessoa.idade}"></td>
				<td>
					<a th:href="@{/editarpessoa/{idpessoa}(idpessoa=${pessoa.id})}" class="waves-effect waves-light btn">Editar</a>
					<a th:href="@{/excluirpessoa/{idpessoa}(idpessoa=${pessoa.id})}" class="waves-effect waves-light btn red">Excluir</a>
				</td>
			</tr>
		</table>

	</div>

	<script type="text/javascript" src="/materialize/js/materialize.min.js"></script>
</body>
</html>